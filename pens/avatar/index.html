<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Avatar</title>
    <link rel="stylesheet" href="./style.css" type="text/css" />
</head>
<body>

<div class="container">
    <div class="content">
        <div class="avatar">
            <div class="hair"></div>
            <div class="hair-fringe">
                <div class="side-fringe"></div>
                <div class="side-fringe"></div>
            </div>
            <div class="hair-highlight">
                <div class="highlight"></div>
                <div class="highlight"></div>
                <div class="highlight"></div>
                <div class="highlight"></div>
            </div>
            <div class="shirt"></div>
            <div class="face"></div>
            <div class="ears">
                <div class="ear"></div>
                <div class="ear"></div>
            </div>
            <div class="neck"></div>
            <div class="glasses">
                <div class="lens"></div>
                <div class="lens"></div>
            </div>
            <div class="eyes">
                <div class="eye">
                    <div class="pupil"></div>
                </div>
                <div class="eye">
                    <div class="pupil"></div>
                </div>
            </div>
            <div class="smile"></div>
        </div>
        <div class="input-group">
            <div class="input">
                <input type="color" id="shirtColor" value="#5898f7">
                <label for="shirtColor">Shirt</label>
            </div>
            <div class="input">
                <input type="color" id="glassesColor" value="#dc4444">
                <label for="glassesColor">Glasses</label>
            </div>
            <div class="input">
                <input type="color" id="hairColor" value="#000">
                <label for="hairColor">Hair</label>
            </div>
            <div class="input">
                <input type="color" id="bgColor" value="#ffb7c7">
                <label for="bgColor">Background</label>
            </div>
            <div class="input">
                <input type="checkbox" id="noGlasses">
                <label for="noGlasses">No glasses</label>
            </div>
        </div>
    </div>
</div>

<script>
    function rgb(r, g, b) {
        return `rgb(${[r, g, b].join(',')})`;
    }

    function hexToRgb(hex) {
        const red = parseInt(hex.substring(1,3), 16);
        const green = parseInt(hex.substring(3,5), 16);
        const blue = parseInt(hex.substring(5,7), 16);
        return [red, green, blue];
    }

    document.getElementById("shirtColor").addEventListener("change", (e) => {
        const hex = e.target.value;
        const [r, g, b] = hexToRgb(hex);
        const darkFactor = 0.7;
        document.documentElement.style.setProperty('--c-shirt', 
            rgb(r, g, b));
        document.documentElement.style.setProperty('--c-shirt-shadow', 
            rgb(r * darkFactor, g * darkFactor, b * darkFactor));
    });
    
    document.getElementById("glassesColor").addEventListener("change", (e) => {
        const hex = e.target.value;
        const [r, g, b] = hexToRgb(hex);
        document.documentElement.style.setProperty('--c-glasses', rgb(r, g, b));
    });

    document.getElementById("bgColor").addEventListener("change", (e) => {
        const hex = e.target.value;
        const [r, g, b] = hexToRgb(hex);
        document.documentElement.style.setProperty('--c-bg', rgb(r, g, b));
    });
    
    document.getElementById("hairColor").addEventListener("change", (e) => {
        const hex = e.target.value;
        const [r, g, b] = hexToRgb(hex);
        const lightFactor = 50;
        document.documentElement.style.setProperty('--c-hair', rgb(r, g, b));
        document.documentElement.style.setProperty('--c-hair-highlight-2', 
            rgb(r + lightFactor, g + lightFactor, b + lightFactor));
    });

    document.getElementById("noGlasses").addEventListener("change", e => {
        const noGlasses = e.target.checked;
        const glassesOpacity = noGlasses ? 0 : 1;
        document.documentElement.style.setProperty('--opacity-glasses', glassesOpacity);
    });
</script>
</body>
</html>