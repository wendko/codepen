<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hiragana Practise</title>
    <style>
        :root {
            --c-success: #a2ffa2;
            --c-fail: #ff8b8b;
            --c-focus: sandybrown;
            --c-bg-focus: bisque;
            --progress: 0%;
            --c-bg-progress: sandybrown;
            --c-fg-progress: sienna;
            --c-bg: navajowhite;
            --c-font: sienna;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100vw;
            height: 100vh;
            margin: 0;
            font-family: monospace;
            background: var(--c-bg);
        }

        #question,
        #score {
            text-align: center;
            color: var(--c-font);
            font-weight: bolder;
        }

        #question {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .appear {
            animation: appear 0.3s ease-in;
        }

        @keyframes appear {
            0% { 
                opacity: 0;
                transform: translateY(10px);
            }
            50% { 
                opacity: 1;
                transform: translateY(-8px);
            }
            75% {
                transform: translateY(5px);
            }
            100% {
                transform: translateY(0px);
            }

        }

        #score {
            font-size: 1.5rem;
            font-weight: bolder;
        }

        #answer {
            text-align: center;
            font-size: 1.5rem;
            padding: 10px;
            border: none;
            outline: 3px dotted var(--c-grey);
            color: var(--c-font);
        }

        #answer:focus {
            outline: 3px dotted var(--c-focus);
            background: var(--c-bg-focus);
        }

        #answer.correct {
            animation: glow 0.8s linear 1;
        }

        @keyframes glow {
            1% {
                background: var(--c-success);
            }

            100% {
                background: transparent;
            }
        }

        #answer.wrong {
            animation: teeter 1s linear 1;
        }


        @keyframes teeter {
            1% {
                background: var(--c-fail);
            }

            10%,
            30% {
                transform: rotate(5deg);
            }

            20%,
            40% {
                transform: rotate(-5deg);
            }

            50% {
                transform: rotate(0deg);
            }

            100% {
                background: transparent;
            }
        }

        #progressBar {
            background: var(--c-fg-progress);
            width: var(--progress);
            transition: width 0.2s ease-in;
            transform: translateY(-20px);
        }

        #progressBarBg {
            background: var(--c-bg-progress);
        }

        #progressBar,
        #progressBarBg {
            height: 20px;
            border-radius: 5px;
            display: block;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>
    <div id="app">
        <p id="question">{{current.q}}</p>
        <input type="text" id="answer" v-on:keyup.enter="submit" placeholder="enter/return" autocomplete="off"
            autocorrect="off" autocapitalize="off" spellcheck="false">
        <p id="score">Progress: {{cleared}} / {{total}}</p>
        <span id="progressBarBg"></span>
        <span id="progressBar"></span>
    </div>
    <script>
        const hiraganaChars = [
            { q: 'あ', a: 'a' },
            { q: 'い', a: 'i' },
            { q: 'う', a: 'u' },
            { q: 'え', a: 'e' },
            { q: 'お', a: 'o' },
            { q: 'か', a: 'ka' },
            { q: 'き', a: 'ki' },
            { q: 'く', a: 'ku' },
            { q: 'け', a: 'ke' },
            { q: 'こ', a: 'ko' },
            { q: 'さ', a: 'sa' },
            { q: 'し', a: 'shi' },
            { q: 'す', a: 'su' },
            { q: 'せ', a: 'se' },
            { q: 'そ', a: 'so' },
            { q: 'た', a: 'ta' },
            { q: 'ち', a: 'chi' },
            { q: 'つ', a: 'tsu' },
            { q: 'て', a: 'te' },
            { q: 'と', a: 'to' },
            { q: 'な', a: 'na' },
            { q: 'に', a: 'ni' },
            { q: 'ぬ', a: 'nu' },
            { q: 'ね', a: 'ne' },
            { q: 'の', a: 'no' },
            { q: 'は', a: 'ha' },
            { q: 'ひ', a: 'hi' },
            { q: 'ふ', a: 'fu' },
            { q: 'へ', a: 'he' },
            { q: 'ほ', a: 'ho' },
            { q: 'ま', a: 'ma' },
            { q: 'み', a: 'mi' },
            { q: 'む', a: 'mu' },
            { q: 'め', a: 'me' },
            { q: 'も', a: 'mo' },
            { q: 'や', a: 'ya' },
            { q: 'ゆ', a: 'yu' },
            { q: 'よ', a: 'yo' },
            { q: 'ら', a: 'ra' },
            { q: 'り', a: 'ri' },
            { q: 'る', a: 'ru' },
            { q: 'れ', a: 're' },
            { q: 'ろ', a: 'ro' },
            { q: 'わ', a: 'wa' },
            { q: 'ゐ', a: 'wi' },
            { q: 'ゑ', a: 'we' },
            { q: 'を', a: 'wo' },
            { q: 'ん', a: 'n' },
            { q: 'が', a: 'ga' },
            { q: 'ぎ', a: 'gi' },
            { q: 'ぐ', a: 'gu' },
            { q: 'げ', a: 'ge' },
            { q: 'ご', a: 'go' },
            { q: 'ざ', a: 'za' },
            { q: 'じ', a: 'ji' },
            { q: 'ず', a: 'zu' },
            { q: 'ぜ', a: 'ze' },
            { q: 'ぞ', a: 'zo' },
            { q: 'だ', a: 'da' },
            { q: 'ぢ', a: 'ji' },
            { q: 'づ', a: 'zu' },
            { q: 'で', a: 'de' },
            { q: 'ど', a: 'do' },
            { q: 'ば', a: 'ba' },
            { q: 'び', a: 'bi' },
            { q: 'ぶ', a: 'bu' },
            { q: 'べ', a: 'be' },
            { q: 'ぼ', a: 'bo' },
            { q: 'ぱ', a: 'pa' },
            { q: 'ぴ', a: 'pi' },
            { q: 'ぷ', a: 'pu' },
            { q: 'ぺ', a: 'pe' },
            { q: 'ぽ', a: 'po' },
            { q: 'きゃ', a: 'kya' },
            { q: 'きゅ', a: 'kyu' },
            { q: 'きょ', a: 'kyo' },
            { q: 'しゃ', a: 'sha' },
            { q: 'しゅ', a: 'shu' },
            { q: 'しょ', a: 'sho' },
            { q: 'ちゃ', a: 'cha' },
            { q: 'ちゅ', a: 'chu' },
            { q: 'ちょ', a: 'cho' },
            { q: 'にゃ', a: 'nya' },
            { q: 'にゅ', a: 'nyu' },
            { q: 'にょ', a: 'nyo' },
            { q: 'ひゃ', a: 'hya' },
            { q: 'ひゅ', a: 'hyu' },
            { q: 'ひょ', a: 'hyo' },
            { q: 'みゃ', a: 'mya' },
            { q: 'みゅ', a: 'myu' },
            { q: 'みょ', a: 'myo' },
            { q: 'りゃ', a: 'rya' },
            { q: 'りゅ', a: 'ryu' },
            { q: 'りょ', a: 'ryo' },
            { q: 'ぎゃ', a: 'gya' },
            { q: 'ぎゅ', a: 'gyu' },
            { q: 'ぎょ', a: 'gyo' },
            { q: 'じゃ', a: 'ja' },
            { q: 'じゅ', a: 'ju' },
            { q: 'じょ', a: 'jo' },
            { q: 'びゃ', a: 'bya' },
            { q: 'びゅ', a: 'byu' },
            { q: 'びょ', a: 'byo' },
            { q: 'ぴゃ', a: 'pya' },
            { q: 'ぴゅ', a: 'pyu' },
            { q: 'ぴょ', a: 'pyo' }
        ];

        function randomize(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        const randomizedHiragana = randomize(hiraganaChars);

        const modes = {
            'hiragana': 0,
            'katakana': 1,
        }

        new Vue({
            el: '#app',
            data: {
                cleared: 0,
                current: randomizedHiragana[0],
                total: randomizedHiragana.length,
                mode: modes.hiragana
            },
            methods: {
                submit: function () {
                    const answerEl = document.getElementById('answer');
                    const questionEl = document.getElementById('question');

                    const answer = answerEl.value.toLowerCase().trim();
                    if (answer === this.current.a) {
                        answerEl.value = '';
                        this.cleared += 1;
                        this.current = randomizedHiragana[this.cleared];
                        answerEl.classList.add('correct');
                        questionEl.classList.add('appear');
                        document.documentElement.style.setProperty('--progress', `${this.cleared / this.total * 100}%`);
                        setTimeout(() => {
                            answerEl.classList.remove('correct');
                            questionEl.classList.remove('appear');
                        }, 1000);
                    } else {
                        answerEl.classList.add('wrong');
                        setTimeout(() => {
                            answerEl.classList.remove('wrong');
                        }, 1000);
                    }
                }
            }
        });
    </script>

</body>

</html>